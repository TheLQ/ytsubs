<!DOCTYPE html>
<html>

<head>
    {{> partialHead}}
</head>

<body>
{{> partialBodyStart}}
<div id="app">
    <div id="sidebar">
        <form action="/api/youtube/subscriptions" method="POST" enctype="multipart/form-data">
            <label>
                Upload subscription list from
                <a href="https://www.youtube.com/subscription_manager?action_takeout=1">
                    Youtube Subscription Manager
                </a>
                <input type="file" name="xml">
                <button type="submit" name="uploadSubscriptions">Upload Subscriptions</button>
            </label>
        </form>
        <form action="" method="POST" enctype="multipart/form-data">
            <label>
                Check Youtube Auth
                <button type="submit" name="checkYoutubeAuth">Check Youtube Auth</button>
            </label>
        </form>
        <form action="" method="POST" enctype="multipart/form-data">
            <label>
                Sync Subscriptions
                <button type="submit" name="syncSubscriptions">Upload Subscriptions</button>
            </label>
        </form>

        <form action="/api/group/add" ajaxmethod="POST" class="ajaxform">
            <label>
                Add group
                <input type="text" name="groupName"/>
                <button type="submit" name="addGroup">Add Group</button>
            </label>
        </form>

        <form action="/api/group/color" ajaxmethod="POST" class="ajaxform">
            <select name="groupName">
                <option value=""></option>
                {{#each @root.groups}}
                    <option value="{{groupName}}">{{groupName}}</option>
                {{/each}}
            </select>
            <input type="color" name="color"/>
            <button type="submit" name="setGroupColor">Set Group Color</button>
        </form>
    </div>
    <div id="content">
        <h1>Subscriptions</h1>
        <ul>
            {{#each subscriptions}}
                <li>
                    <a href="https://www.youtube.com/channel/{{channelId}}">{{channelName}}</a> -
                    {{#each groupsInfo}}
                        <div class="channel-tag" style="background-color: #{{color}};">
                            {{groupName}} 
                            <form class="group-channel-remove-form ajaxform" action="/api/group/channel" ajaxmethod="DELETE">
                                <input type="hidden" name="channelId" value="{{../channelId}}"/>
                                <input type="hidden" name="groupName" value="{{groupName}}"/>
                                <button type="submit" name="submit">x</button>
                            </form>
                        </div>
                        ,
                    {{/each}}
                    <form class="group-channel-add-form ajaxform" action="/api/group/channel" ajaxmethod="POST">
                        <select name="groupName">
                            <option value=""></option>
                            {{#each @root.groups}}
                                <option value="{{groupName}}">{{groupName}}</option>
                            {{/each}}
                        </select>
                        <input type="hidden" name="channelId" value="{{channelId}}"/>
                        <button type="submit" name="addChannelGroup">Add Group</button>
                    </form>
                </li>
            {{/each}}
        </ul>
    </div>
</div>
</body>

</html>
